# 🧋 FastAPI Bubble Tea Backend

Бэкенд-приложение для Bubble Tea кафе, реализованное на **FastAPI** с использованием **PostgreSQL**, **SQLAlchemy** и **JWT-аутентификации**. Поддерживает регистрацию, авторизацию, аватарки пользователей, отображение карты ресторанов и текущие промо-акции.

---

## 🚀 Возможности

- ✅ Регистрация и авторизация пользователей
- 🔐 JWT-аутентификация
- 🖼️ Загрузка аватарки
- 👤 Получение и обновление профиля
- 🚪 Выход из аккаунта
- 🗺️ Получение карты города с расположением ресторанов
- 🎁 Отображение актуальных промо-акций (обновляются каждую минуту)

---

## 🗂️ Структура проекта

```
.
├── main.py                 # Основной файл FastAPI-приложения
├── database.py             # Подключение к базе PostgreSQL
├── models.py               # SQLAlchemy-модель пользователя
├── routes/
│   └── promotions.py       # Роут с эндпоинтом /promotions
├── static/
│   ├── photos/             # Загруженные аватарки пользователей
│   └── map/                # Картинка карты города
├── tests/
│   ├── database/
│   │   └── test_database.py
│   ├── models/
│   │   └── test_models.py
│   ├── promotions/
│   │   └── test_promotions.py
│   └── main/
│       ├── test_login.py
│       ├── test_logout.py
│       ├── test_map.py
│       ├── test_profile.py
│       ├── test_register.py
│       └── test_upload_photo.py
├── .env                    # Переменные окружения
├── pytest.ini              # Конфигурация тестов
└── requirements.txt        # Зависимости проекта
```
---

## 📌 Эндпоинты приложения
    POST /register — регистрация пользователя
    POST /login — авторизация и получение JWT
    GET /profile — получение профиля
    PUT /profile — обновление профиля
    POST /upload-photo — загрузка аватарки
    GET /map — получение изображения карты
    GET /promotions — получение текущих промо-акций
    POST /logout — выход из аккаунта

---

## 🧪 Тестирование
    📦 Все тесты лежат в директории tests/.
    🧬 Используется реальная база данных PostgreSQL, указанная в .env.

    Запуск всех тестов:
        pytest
        pytest -v

---

### ⚙️ Переменные окружения
    Файл .env должен содержать строку подключения к PostgreSQL:
        DATABASE_URL=postgresql://fastapi_user:mypassword123@localhost/fastapi_db

---

## 🐳 Возможности расширения
    - Добавление категорий и фильтрации акций
    - Интерактивная карта с возможностью выбора ресторана
    - Админ-панель для управления пользователями и акциями

---

## 📦 Зависимости
    См. файл requirements.txt